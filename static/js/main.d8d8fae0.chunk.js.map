{"version":3,"sources":["components/Searchbar/Searchbar.module.css","components/Modal/Modal.module.css","components/ImageGalleryItem/ImageGalleryItem.module.css","components/Button/Button.module.css","components/Loader/Loader.module.css","components/ImageGallery/ImageGallery.module.css","services/Pixabay.js","components/ImageGalleryItem/ImageGalleryItem.js","components/Button/Button.js","components/Loader/Loader.js","components/ImageGallery/ImageGallery.js","components/Searchbar/Searchbar.js","components/Modal/Modal.js","App.js","index.js"],"names":["module","exports","axios","defaults","baseURL","params","key","image_type","fetchPictures","queryName","a","page","get","response","data","hits","ImageGalleryItem","webformatURL","largeImageURL","tags","onClick","id","className","s","ImageGalleryItemImage","src","alt","Button","type","LoadSpinner","loaderPosition","color","height","width","ImageGallery","state","images","error","status","currentPage","loading","scrollSmooth","window","scrollTo","top","document","documentElement","scrollHeight","behavior","handleLoadMore","setState","prevState","handleClick","e","target","nodeName","largeImg","dataset","source","props","handleBigImg","prevProps","prevName","nextName","this","setTimeout","then","catch","title","length","errorSpan","map","Component","Searchbar","handleNameChange","currentTarget","value","toLowerCase","handleSubmit","preventDefault","trim","onSubmit","toast","info","SearchForm","SearchFormButton","SearchFormButtonLabel","onChange","SearchFormInput","autoComplete","autoFocus","placeholder","modalRoot","querySelector","Modal","handleKeyDown","code","toggleModal","handleBackdropClick","addEventListener","removeEventListener","children","largeImgURL","createPortal","Overlay","App","showModal","handleFormSubmit","autoClose","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.d8d8fae0.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__2OgXN\",\"SearchForm\":\"Searchbar_SearchForm__3ZCxY\",\"SearchFormButton\":\"Searchbar_SearchFormButton__z_YKR\",\"SearchFormButtonLabel\":\"Searchbar_SearchFormButtonLabel__2qbGu\",\"SearchFormInput\":\"Searchbar_SearchFormInput__2lKSJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__2Iimr\",\"Modal\":\"Modal_Modal__2hYhO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__1NmcE\",\"ImageGalleryItemImage\":\"ImageGalleryItem_ImageGalleryItemImage__1dGhj\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__1k7IL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loaderPosition\":\"Loader_loaderPosition__h28Tl\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__1zmgh\",\"errorSpan\":\"ImageGallery_errorSpan__1YM7j\",\"title\":\"ImageGallery_title__2xbNM\"};","// function fetchPictures(query, page) {\r\n//     return   fetch(`https://pixabay.com/api/?q=${query}&page=${page}&key=23145866-da154062db79be09da281bc6e&image_type=photo&orientation=horizontal&per_page=12`)\r\n//         .then(response => {\r\n//           if (response.ok) {\r\n//             return response.json();\r\n//           }\r\n//           return Promise.reject(new Error(`Dont have pictures with name ${query}`),\r\n//           )\r\n//         })\r\n// }\r\n\r\n// const api = {\r\n//     fetchPictures\r\n// }\r\n\r\n// export default api;\r\n\r\nimport axios from 'axios';\r\n\r\nconst API_KEY = '23145866-da154062db79be09da281bc6e';\r\nconst BASE_URL = 'https://pixabay.com/api/';\r\n\r\naxios.defaults.baseURL = BASE_URL;\r\naxios.defaults.params = {\r\n  key: API_KEY,\r\n  image_type: 'photo',\r\n};\r\n\r\nexport const fetchPictures = async (queryName, page = 1) => {\r\n  const response = await axios.get(\r\n    `?q=${queryName}&orientation=horizontal&safesearch=true&page=${page}&per_page=12`,\r\n  );\r\n  return response.data.hits;\r\n};\r\n\r\n","import s from './ImageGalleryItem.module.css';\r\n\r\nfunction ImageGalleryItem({ webformatURL, largeImageURL, tags, onClick,id}) {\r\n   return (\r\n        <>\r\n            \r\n                <img className={s.ImageGalleryItemImage}\r\n                  id={id}\r\n                    src={webformatURL}\r\n                    data-source={largeImageURL}\r\n                    alt={tags}\r\n                    onClick={onClick}\r\n                \r\n                />\r\n           \r\n        </>\r\n    )\r\n}\r\n\r\nexport default ImageGalleryItem;\r\n","import s from './Button.module.css';\r\nfunction Button({onClick}) {\r\n    return (\r\n       <button className={s.Button} type=\"button\" onClick={onClick}>Load more</button>\r\n  )\r\n}\r\nexport default Button;","import Loader from \"react-loader-spinner\";\r\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\r\nimport s from './Loader.module.css';\r\n\r\nfunction LoadSpinner() {\r\n  return (\r\n    <div className={s.loaderPosition}>\r\n      <Loader\r\n        type=\"Bars\"\r\n        color=\"#00BFFF\"\r\n        height={80}\r\n        width={80}\r\n      />\r\n    </div>\r\n  )\r\n}\r\nexport default LoadSpinner;","import { Component } from \"react\";\r\nimport s from './ImageGallery.module.css';\r\nimport {fetchPictures} from '../../services/Pixabay'\r\nimport ImageGalleryItem from \"../ImageGalleryItem\";\r\nimport Button from \"../Button\";\r\nimport LoadSpinner from \"../Loader\";\r\n\r\nclass ImageGallery extends Component {\r\n\r\n  state = {\r\n    images: null,\r\n    error: null,\r\n    status: 'idle',\r\n    currentPage: 1,\r\n    loading:false,\r\n   \r\n}\r\n  componentDidUpdate(prevProps, prevState) {\r\n    const prevName = prevProps.queryName;\r\n    const nextName = this.props.queryName;\r\n    const { currentPage} = this.state;\r\n  if (prevName !== nextName) {\r\n    this.setState({ status: 'pending' });\r\n    \r\n    setTimeout(() => {\r\n      fetchPictures(nextName, 1)\r\n      .then(images => this.setState({ images: images, currentPage: 1, status: 'resolved' }))\r\n      .catch(error => this.setState({ error, status: 'rejected' }))\r\n    },1000)\r\n    }\r\n\r\n\r\n    if(prevState.currentPage !== currentPage && currentPage !== 1){\r\n       fetchPictures(this.props.queryName, currentPage)\r\n          .then(images => {\r\n            this.setState(prevState => ({\r\n              images: [...prevState.images, ...images],\r\n              status:'resolved',  \r\n            }))\r\n     \r\n            if (prevState.images !== images) {\r\n              this.scrollSmooth();  \r\n            }\r\n            })\r\n            .catch(error => {\r\n              this.setState({status:'rejected'})\r\n            })\r\n    }\r\n  }\r\n  scrollSmooth = () => {\r\n    return window.scrollTo({\r\n      top: document.documentElement.scrollHeight,\r\n      behavior: \"smooth\",\r\n    })\r\n  }\r\n\r\n  handleLoadMore = () => {\r\n    \r\n    this.setState(prevState => ({\r\n      currentPage: prevState.currentPage + 1,\r\n    }))\r\n  }\r\n     \r\n  handleClick = (e) => {\r\n    if (e.target.nodeName === \"IMG\") {\r\n      const largeImg = e.target.dataset.source;\r\n      this.props.handleBigImg(largeImg);\r\n    }\r\n  }\r\n  \r\n  render() {\r\n    const {images, status} = this.state;\r\n    \r\n    if (status === 'idle') {\r\n        return <h1 className={s.title}>Input name image</h1>\r\n    }\r\n    if (status === 'pending') {\r\n       return <div><LoadSpinner/></div> \r\n    }\r\n   \r\n    if (status === 'rejected') {\r\n       return <div className={s.title}>Oops</div>\r\n    }\r\n    \r\n    if (status === 'resolved') {\r\n      if (images.length === 0)\r\n      {\r\n        return (\r\n       <h2 className={s.title}> Don't have images with name <span className={s.errorSpan}> {this.props.queryName}</span>! Input another name</h2>\r\n      )\r\n        \r\n      } \r\n      return (\r\n        <div>\r\n          <ul className={s.ImageGallery}>\r\n            {images.length > 0 &&\r\n              images.map(({ webformatURL, largeImageURL, tags,id}) => (\r\n                <li className={s.ImageGalleryItem} key={id}  >\r\n                <ImageGalleryItem\r\n                  key={{id}}\r\n                  webformatURL={webformatURL}\r\n                  largeImageURL={largeImageURL}\r\n                  tags={tags}\r\n                  onClick={this.handleClick}\r\n                />                \r\n            </li>\r\n              ))\r\n            }\r\n          </ul>\r\n          {images.length > 11 && <Button onClick={this.handleLoadMore} />}      \r\n        </div>\r\n      )\r\n    }\r\n  }\r\n}\r\n\r\nexport default ImageGallery;","import { Component } from \"react\";\r\nimport s from './Searchbar.module.css';\r\nimport { toast } from \"react-toastify\";\r\n\r\nclass Searchbar extends Component {\r\n\r\n    state = {\r\n        queryName: '',\r\n    }\r\n\r\n    handleNameChange = e => {\r\n        this.setState({ queryName: e.currentTarget.value.toLowerCase() });\r\n    };\r\n\r\n    handleSubmit = e => {\r\n        e.preventDefault();\r\n\r\n        if (this.state.queryName.trim() === '') {\r\n            toast.info(\"Input name images!\");\r\n            return;\r\n        }\r\n        this.props.onSubmit(this.state.queryName );\r\n        this.setState({ queryName: '' });\r\n}\r\n\r\n    render() {    \r\n        return (\r\n            <header className={s.Searchbar}>\r\n                <form className={s.SearchForm} onSubmit={this.handleSubmit}>\r\n                    <button type=\"submit\" className={s.SearchFormButton}>\r\n                        <span className={s.SearchFormButtonLabel}>Search</span>\r\n                    </button>\r\n    \r\n                    <input\r\n                        value={this.state.queryName}\r\n                        onChange={this.handleNameChange}\r\n                        className={s.SearchFormInput}\r\n                        type=\"text\"\r\n                        autoComplete=\"off\"\r\n                        autoFocus\r\n                        placeholder=\"Search images and photos\"\r\n                    />\r\n                </form>\r\n            </header>\r\n        )\r\n    }\r\n}\r\nexport default Searchbar;\r\n","import { Component } from 'react';\r\nimport { createPortal } from 'react-dom';\r\nimport s from './Modal.module.css';\r\n\r\nconst modalRoot = document.querySelector('#modal-root');\r\n\r\nclass Modal extends Component {\r\n    componentDidMount() {\r\n        window.addEventListener('keydown', this.handleKeyDown)\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        window.removeEventListener('keydown', this.handleKeyDown)\r\n    }\r\n    \r\n    handleKeyDown = e => {\r\n        if (e.code === 'Escape') {\r\n            this.props.toggleModal();\r\n        }\r\n    }\r\n\r\n    handleBackdropClick = e => {\r\n        if (e.currentTarget === e.target) {\r\n            this.props.toggleModal();\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const { children, largeImgURL } = this.props;\r\n        return createPortal(\r\n            <div className={s.Overlay} onClick={this.handleBackdropClick}>\r\n                <div className={s.Modal}>\r\n                    <img src={largeImgURL} alt=\"big img\" width='1200'/>\r\n                    {children}</div>\r\n            </div>,\r\n            modalRoot,\r\n        )\r\n}\r\n}\r\n\r\nexport default Modal;\r\n\r\n\r\n\r\n// {/* <h1 className={s.title}>modal</h1> */}\r\n// {/* <img src={largeImageURL}\r\n//     alt={tags} /> */}","import { Component } from \"react\";\nimport \"./App.css\";\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport ImageGallery from './components/ImageGallery';\nimport Searchbar from \"./components/Searchbar\";\nimport Modal from \"./components/Modal\";\n\nclass App extends Component {\n  state = {\n    queryName: '',\n    page: 1,\n    images: [],\n    showModal: false,\n    largeImg: \"\",\n  }\n    \n  toggleModal = () => {\n    this.setState(({ showModal }) => ({\n      showModal: !showModal,\n    }))\n  }\n\n  handleFormSubmit = queryName => {\n    this.setState({\n      queryName,\n    });\n  }\n\n  handleBigImg = (data) => {\n    this.setState({ largeImg: data });\n    this.toggleModal();\n  }\n\n \n  render() {\n    const { showModal, queryName,largeImg } = this.state;\n\n     return (\n       <div>\n         <Searchbar onSubmit={this.handleFormSubmit} />\n        \n         <ImageGallery queryName={queryName}  handleBigImg={ this.handleBigImg} />\n         \n         {showModal &&\n           (<Modal toggleModal={this.toggleModal} largeImgURL={largeImg}/>)}\n\n         <ToastContainer autoClose={2000} />\n      </div>\n    );\n  }\n}\n\nexport default App;\n\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}